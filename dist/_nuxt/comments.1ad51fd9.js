import{i as h,o as t,e as s,f as l,t as k,u as v,j as x,v as y,N as g,O as N,D as b,F as C,H as V,c as R,w as B,a as P,l as S}from"./entry.38e07db5.js";import{_ as T}from"./ComponentContainer.7fd0c4dd.js";import{u as H}from"./composables.85f75fe7.js";const K={class:"border bg-white text-slate-900 rounded p-4"},U={class:"font-bold text-xl"},$={key:0},j=["onKeyup"],J={key:1},M={class:"flex flex-row gap-2"},O={key:0},A={key:1},G={key:0,class:"pl-4"},L={key:1,class:"py-2"},D={__name:"Comment",props:{comment:Object,replies:Array,canEdit:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!1},handleRemove:Function,handlePost:Function},setup(o){const a=o,f=h(!1),m=h(""),i=h(""),n=h(""),e=h(a.comment.text);function u(){f.value=!0}function r(){f.value=!1}function c(){a.handlePost(a.comment,m.value,i.value),m.value="",i.value="",f.value=!1}function _(){n.value=!0}function w(){a.comment.text=e,n.value=!1}return(q,p)=>{const E=D;return t(),s(C,null,[l("div",K,[l("div",U,k(o.comment.name),1),v(n)?(t(),s("div",$,[x(l("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=d=>g(e)?e.value=d:null),class:"border rounded border-slate-400",onKeyup:N(w,["enter"])},null,40,j),[[y,v(e)]])])):(t(),s("div",J,k(v(e)),1)),l("div",M,[l("div",null,[l("button",{onClick:u,class:"btn btn-green"},"Reply")]),o.canEdit?(t(),s("div",O,[v(n)?(t(),s("button",{key:1,onClick:w,class:"btn btn-orange"},"Save")):(t(),s("button",{key:0,onClick:_,class:"btn btn-green"},"Edit"))])):b("",!0),o.canDelete?(t(),s("div",A,[l("button",{onClick:p[1]||(p[1]=d=>o.handleRemove(o.comment)),class:"btn btn-green"},"Delete")])):b("",!0)])]),o.replies.length?(t(),s("div",G,[(t(!0),s(C,null,V(o.replies,(d,F)=>(t(),R(E,{key:F,comment:d,replies:d.replies,"can-edit":!0,"can-delete":!0,"handle-remove":o.handleRemove,"handle-post":o.handlePost},null,8,["comment","replies","handle-remove","handle-post"]))),128))])):b("",!0),v(f)?(t(),s("div",L,[x(l("input",{"onUpdate:modelValue":p[2]||(p[2]=d=>g(m)?m.value=d:null),type:"text",placeholder:"Your name"},null,512),[[y,v(m)]]),x(l("textarea",{"onUpdate:modelValue":p[3]||(p[3]=d=>g(i)?i.value=d:null),placeholder:"comment"},null,512),[[y,v(i)]]),l("div",{class:"flex gap-2"},[l("button",{class:"btn btn-orange",onClick:c}," Post "),l("button",{class:"btn btn-orange",onClick:r},"Cancel")])])):b("",!0)],64)}}},Y={__name:"CommentBox",setup(o){const a=h([{id:n(),name:"Josh",text:"Hello, world",replies:[{name:"Jeff",text:"This is bad",id:n(),replies:[{id:n(),name:"Feff",text:"its pretty good",replies:[]},{id:n(),name:"Cleff",text:"Cloom",replies:[]}]},{id:n(),name:"Clint",text:"Goodbye world",replies:[]}]}]);function f(e){i(a.value,e.id)}function m(e,u,r){!u.length||!r.length||e.replies.push({id:n(),name:u,text:r,replies:[]})}function i(e,u,r=null){for(let c in e)if(e[c].id===u){e[c].replies=[],r!==null&&(r.replies=[...r.replies.filter(_=>_.id!==u)]);return}else i(e[c].replies,u,e[c])}function n(){return Math.random().toString(36).substring(2,9)+Date.now().toString(36)}return(e,u)=>{const r=D;return t(!0),s(C,null,V(a.value,(c,_)=>(t(),R(r,{key:_,comment:c,replies:c.replies,"handle-remove":f,"handle-post":m},null,8,["comment","replies"]))),128)}}},X={__name:"comments",setup(o){const a="Comment box";return H({title:a}),(f,m)=>{const i=Y,n=T;return t(),R(n,null,{header:B(()=>[P(k(a))]),body:B(()=>[S(i)]),_:1})}}};export{X as default};
